#%lvsdb-klayout

# Layout
layout(
 top(INVERTER_WITH_DIODES)
 unit(0.001)

 # Layer section
 # This section lists the mask layers (drawing or derived) and their connections.

 # Mask layers
 layer(l103 'NWELL (1/0)')
 layer(l108 'POLY (5/0)')
 layer(l109 'CONTACT (6/0)')
 layer(l110 'METAL1 (7/0)')
 layer(l111 'METAL1_LABEL (7/1)')
 layer(l112 'VIA1 (8/0)')
 layer(l113 'METAL2 (9/0)')
 layer(l114 'METAL2_LABEL (9/1)')
 layer(l115)
 layer(l123)
 layer(l125)
 layer(l133)
 layer(l135)

 # Mask layer connectivity
 connect(l103 l103 l125)
 connect(l108 l108 l109)
 connect(l109 l108 l109 l110 l123 l125 l133 l135)
 connect(l110 l109 l110 l111 l112)
 connect(l111 l110 l111)
 connect(l112 l110 l112 l113)
 connect(l113 l112 l113 l114)
 connect(l114 l113 l114)
 connect(l115 l115)
 connect(l123 l109 l123)
 connect(l125 l103 l109 l125)
 connect(l133 l109 l133)
 connect(l135 l109 l135)

 # Global nets and connectivity
 global(l115 SUBSTRATE)
 global(l135 SUBSTRATE)

 # Device class section
 class(PMOS MOS4)
 class(NMOS MOS4)

 # Device abstracts section
 # Device abstracts list the pin shapes of the devices.
 device(D$PMOS PMOS
  terminal(S
   rect(l123 (-575 -750) (450 1500))
  )
  terminal(G
   rect(l108 (-125 -750) (250 1500))
  )
  terminal(D
   rect(l123 (125 -750) (450 1500))
  )
  terminal(B
   rect(l103 (-125 -750) (250 1500))
  )
 )
 device(D$NMOS NMOS
  terminal(S
   rect(l133 (-575 -450) (450 900))
  )
  terminal(G
   rect(l108 (-125 -450) (250 900))
  )
  terminal(D
   rect(l133 (125 -450) (450 900))
  )
  terminal(B
   rect(l115 (-125 -450) (250 900))
  )
 )

 # Circuit section
 # Circuits are the hierarchical building blocks of the netlist.
 circuit(INVERTER_WITH_DIODES

  # Nets with their geometries
  net(1 name(IN)
   rect(l108 (900 50) (250 1050))
   rect(l108 (-250 0) (250 3100))
   rect(l108 (-250 0) (250 1650))
   rect(l108 (-800 -3100) (550 400))
   rect(l109 (-450 -300) (200 200))
   rect(l110 (-300 -300) (400 400))
   rect(l111 (-201 -201) (2 2))
  )
  net(2 name(VDD)
   rect(l103 (0 2950) (3000 3200))
   rect(l109 (-2450 -1800) (200 200))
   rect(l109 (-200 300) (200 200))
   rect(l109 (-200 300) (200 200))
   rect(l109 (1400 -800) (200 200))
   rect(l109 (-200 300) (200 200))
   rect(l110 (-1850 -1200) (300 1600))
   rect(l110 (1300 -1200) (300 1200))
   rect(l112 (-1850 -800) (200 200))
   rect(l112 (-200 300) (200 200))
   rect(l112 (1400 -700) (200 200))
   rect(l112 (-200 300) (200 200))
   rect(l113 (-2350 -850) (3000 1000))
   rect(l114 (-151 -851) (2 2))
   rect(l123 (-2401 -851) (450 1500))
   rect(l125 (1050 -1200) (600 1200))
  )
  net(3 name(OUT)
   rect(l109 (1300 4350) (200 200))
   rect(l109 (-200 300) (200 200))
   rect(l109 (-200 300) (200 200))
   rect(l109 (-200 -5250) (200 200))
   rect(l109 (-200 300) (200 200))
   rect(l110 (-250 3250) (300 1400))
   rect(l110 (-300 -4600) (300 3200))
   rect(l110 (-300 -2900) (450 400))
   rect(l110 (-450 -1550) (300 850))
   rect(l111 (-51 499) (2 2))
   rect(l123 (-351 2649) (450 1500))
   rect(l133 (-450 -5500) (450 900))
  )
  net(4 name(VSS)
   rect(l109 (550 300) (200 200))
   rect(l109 (-200 300) (200 200))
   rect(l109 (1400 -550) (200 200))
   rect(l109 (-200 300) (200 200))
   rect(l110 (-1850 -1100) (300 1050))
   rect(l110 (1300 -1050) (300 1200))
   rect(l112 (-1850 -1100) (200 200))
   rect(l112 (-200 300) (200 200))
   rect(l112 (1400 -700) (200 200))
   rect(l112 (-200 300) (200 200))
   rect(l113 (-2350 -850) (3000 1000))
   rect(l114 (-151 -851) (2 2))
   rect(l133 (-2401 49) (450 900))
   rect(l135 (1050 -900) (600 1200))
  )

  # Devices and their connections
  device(1 D$PMOS
   location(1025 4950)
   param(L 0.25)
   param(W 1.5)
   param(AS 0.675)
   param(AD 0.675)
   param(PS 3.9)
   param(PD 3.9)
   terminal(S 2)
   terminal(G 1)
   terminal(D 3)
   terminal(B 2)
  )
  device(2 D$NMOS
   location(1025 650)
   param(L 0.25)
   param(W 0.9)
   param(AS 0.405)
   param(AD 0.405)
   param(PS 2.7)
   param(PD 2.7)
   terminal(S 4)
   terminal(G 1)
   terminal(D 3)
   terminal(B 4)
  )

 )
)

# Reference netlist
reference(

 # Device class section
 class(PMOS MOS4)
 class(NMOS MOS4)

 # Circuit section
 # Circuits are the hierarchical building blocks of the netlist.
 circuit(INVERTER_WITH_DIODES

  # Nets
  net(1 name(VSS))
  net(2 name(IN))
  net(3 name(OUT))
  net(4 name(VDD))

  # Outgoing pins and their connections to nets
  pin(1)
  pin(2)
  pin(3)
  pin(4)

  # Devices and their connections
  device(1 PMOS
   name(P)
   param(L 0.25)
   param(W 1.5)
   param(AS 0)
   param(AD 0)
   param(PS 0)
   param(PD 0)
   terminal(S 4)
   terminal(G 2)
   terminal(D 3)
   terminal(B 4)
  )
  device(2 NMOS
   name(N)
   param(L 0.25)
   param(W 0.9)
   param(AS 0)
   param(AD 0)
   param(PS 0)
   param(PD 0)
   terminal(S 3)
   terminal(G 2)
   terminal(D 1)
   terminal(B 1)
  )

 )
)

# Cross reference
xref(
 circuit(INVERTER_WITH_DIODES INVERTER_WITH_DIODES match
  xref(
   net(1 2 match)
   net(3 3 match)
   net(2 4 match)
   net(4 1 match)
   pin(() 0 match)
   pin(() 1 match)
   pin(() 2 match)
   pin(() 3 match)
   device(2 2 match)
   device(1 1 match)
  )
 )
)
